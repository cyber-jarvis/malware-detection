#!/usr/bin/python3

import extractor
import sys

usage = "./extract_csv -[Type|Class|Mode] <path/to/source/folder> <path/to/destination/file>\n\n" + \
		"Type  : Type of the data to be extracted (training data / testing data).\n"+\
		"        By default it is set as testing data, use option [-t] to set it to training data.\n\n" + \
		"Class : In which class does the data belong to? Ignored if extracting testing data.\n"+\
		"        Use option [-m] if extracting 'malware' data and [-c] otherwise.\n"+\
		"        By default it is set to [-m].\n\n"+\
		"Mode  : Mode to store the data in destination file [write (w)/append (a)].\n\n"+\
		"example usage: ./extract_to_csv -tmw ./exe/ ./Data/malware_data.csv"
		
if len(sys.argv) < 4:
	if sys.argv[1][0] == '-':
		print(usage)
	else:
		source = sys.argv[1]
		dest = sys.argv[2]
else:
	print(sys.argv[1])
	if sys.argv[1][0] != '-':
		print(usage)
	options = sys.argv[1][1:]
	source = sys.argv[2]
	dest = sys.argv[3]
	
T=False 
C=False
M='a'

if 't' in options or 'T' in options:
	T = True

if 'm' in options or 'M' in options:
	C = False
elif 'c' in options or 'C' in options:
	C = True

if 'w' in options:
	M = 'w'
elif 'a' in options:
	M = 'a'
	
extractor.extract_folder(source, dest, training_data=T, clean=C, mode=M)

